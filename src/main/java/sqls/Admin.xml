<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org/DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="admin">
<!-- 회원목록 -->
<select id="memberList"
	resultType="a.dto.MemberDto">
	select
		user_id, 
		username, 
		nickname ,
		email ,
		reg_date,
		auth
		from Member2
</select>

<select id="searchByMemberList"
			resultType="a.dto.MemberDto">
		select
			user_id,
			username,
			nickname ,
			email ,
			reg_date,
			auth
		from Member2
		where
			${param1} like CONCAT('%', #{param2}, '%')
</select>

<!-- 회원등록 -->
<insert id="insertMember">
	insert into Member2
		(user_id, pwd, username)
	values
		(#{user_id}, #{pwd}, #{username})
</insert>

<!--회원정보 상세조회 -->
<select id="viewMember" resultType="a.dto.MemberDto">
	select
		user_id ,
		username,
		nickname ,
		email,
		reg_date,
		modify_date,
		auth
	from Member2
	where user_id = #{user_id}
</select>

<!--게시글목록 -->
<select id="bbsList" parameterType="a.dto.BbsParam"
	resultType="a.dto.FreePostDto">
	select
		bbs_seq,
		user_id,
		title,
		readcount,
		likecount,
		cmtcount,
		wdate,
		del
		from FreePost
			
</select>

<select id="searchByFreePostList"
			resultType="a.dto.FreePostDto">
		select
			bbs_seq,
			user_id,
			title,
			readcount,
			likecount,
			cmtcount,
			wdate,
			del
			from FreePost
		where
			${param1} like CONCAT('%', #{param2}, '%')
</select>

<!-- 자유게시판 댓글 -->
<select id="getComment" resultType="a.dto.FreeCommentVO">
	select comment_seq, user_id, bbs_seq, cmt_content, del_cmt, reg_cmtdate
	from FreeComment
</select>

<select id="searchByFreeCommentList"
			resultType="a.dto.FreeCommentVO">
		select 
		    comment_seq, 
		    user_id, 
		    bbs_seq, 
		    cmt_content, 
		    del_cmt, 
		    reg_cmtdate 
		from 
		    FreeComment
		where
			${param1} like CONCAT('%', #{param2}, '%')
</select>

<!-- title 클릭 시 클릭한 bbs_seq와 같은 bbs_seq가져와 게시물 보이기 -->
<!-- 성국님 bbs.xml확인 필요 -->
<select id="getBbs" parameterType="Integer" resultType="a.dto.FreePostDto">
	select bbs_seq, user_id, title, content, readcount, likecount, cmtcount, wdate, update_date, del
	from FreePost
	where bbs_seq = #{bbs_seq}
</select>

<!-- 로그인 체크 - 관리자페이지 접근때문에 만들어뒀지만 다윤님 mapper(Member.xml)에서 가져와야 할 것 같기도..--> 
<select id="login_check" parameterType="a.dto.MemberDto" resultType="String">
	select user_id
	from Member2
	where user_id=#{user_id}
</select>
</mapper>